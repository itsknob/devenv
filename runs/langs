#!/usr/bin/env bash
log "////////////////"
log "//// Langs"
log "///////////"
<<<<<<< HEAD
<<<<<<< HEAD
log "// Installing Language Managers"
log ""
=======
>>>>>>> e0487ba (feat: add dry_run guards to runs executables)
=======
log "// Installing Language Managers"
log ""
>>>>>>> 7337865 (chore: clean up logging)

# 1 is DRY 0 is WET
dry_run=${dry_run:-"1"}

# Rust
log "Installing Rustup"
if [[ $dry_run == "0" ]]; then
    if ! hash rustup; then
        curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    else
        log "Rust already Installed"
    fi
else
    if ! hash rustup; then
        log "curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh "
    else
        log "Rust already Installed"
    fi
fi

# Node Version Manager
log "Installing Node Version Manager"
if [[ $dry_run == "0" ]]; then
    if ! hash nvm 2>/dev/null; then
<<<<<<< HEAD
<<<<<<< HEAD
        release=$(curl -L https://api.github.com/repos/nvm-sh/nvm/releases/latest | jq .name)
=======
        release=$(curl -L https://api.github.com/repos/nvm-sh/nvm/releases/latest 2>/dev/null | jq .name | tr -d '"')
>>>>>>> e0487ba (feat: add dry_run guards to runs executables)
=======
        release=$(curl -L https://api.github.com/repos/nvm-sh/nvm/releases/latest | jq .name)
>>>>>>> 7337865 (chore: clean up logging)
        nvm_release_url=https://raw.githubusercontent.com/nvm-sh/nvm/$release/install.sh
        log "  Latest nvm: $release"
        log "  Using URL: $nvm_release_url"
        curl -o- $nvm_release_url | bash
    else
        log "NVM already installed"
    fi
else
<<<<<<< HEAD
<<<<<<< HEAD
    if ! hash nvm; then
        release=$(curl -L https://api.github.com/repos/nvm-sh/nvm/releases/latest | jq .name)
=======
    if ! hash nvm 2>/dev/null; then
        release=$(curl -L https://api.github.com/repos/nvm-sh/nvm/releases/latest 2>/dev/null | jq .name | tr -d '"')
>>>>>>> e0487ba (feat: add dry_run guards to runs executables)
=======
    if ! hash nvm; then
        release=$(curl -L https://api.github.com/repos/nvm-sh/nvm/releases/latest | jq .name)
>>>>>>> 7337865 (chore: clean up logging)
        nvm_release_url=https://raw.githubusercontent.com/nvm-sh/nvm/$release/install.sh
        log "Latest nvm: $release"
        log "Using URL: $nvm_release_url"
        log "  curl -o- $nvm_release_url | bash"
    else
        log "NVM already installed"
    fi
fi
<<<<<<< HEAD
<<<<<<< HEAD
=======

>>>>>>> e0487ba (feat: add dry_run guards to runs executables)
=======
>>>>>>> 7337865 (chore: clean up logging)
